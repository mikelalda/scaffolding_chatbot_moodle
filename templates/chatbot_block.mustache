<div class="block_course_chatbot" id="block_course_chatbot_{{blockid}}">
    
    <!-- Vista de selecciÃ³n de unidad -->
    <div id="unit-selection-view-{{blockid}}">
        <h5 class="chatbot-title">{{#str}}chooseunit, block_course_chatbot{{/str}}</h5>
        <div class="list-group">
            {{#units}}
            <button type="button" class="list-group-item list-group-item-action unit-selector" data-unitindex="{{@index}}" data-unitname="{{name}}">
                {{name}}
            </button>
            {{/units}}
        </div>
    </div>

    <!-- Vista del Chat (inicialmente oculta) -->
    <div id="chatbot-view-{{blockid}}" style="display: none;">
        <div class="chatbot-header">
            <button id="back-to-units-{{blockid}}" class="btn btn-sm btn-secondary back-button" title="{{#str}}back, core{{/str}}">&larr;</button>
            <h5 id="chatbot-title-{{blockid}}" class="chatbot-title">{{displayname}}</h5>
        </div>
        <div class="chatbot-body">
            <div class="chatbot-messages" id="chatbot-messages-{{blockid}}" role="log" aria-live="polite">
                <div class="chatbot-message bot-message">{{chatbot_initial_message}}</div>
            </div>
            <div class="chatbot-input-area">
                <input type="text" id="chatbot-input-{{blockid}}" placeholder="{{#str}}typemessage, block_course_chatbot{{/str}}" class="form-control" aria-label="{{#str}}typemessage, block_course_chatbot{{/str}}">
                <button id="chatbot-send-{{blockid}}" class="btn btn-primary">{{#str}}send, core{{/str}}</button>
            </div>
        </div>
    </div>

</div>
{{#js}}
{{/js}}
